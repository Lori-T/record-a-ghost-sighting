{% extends "govuk-prototype-kit/layouts/govuk-branded.njk" %}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}
{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "Training"
    },
    html: 'This is not a real service – this is for training purposes only. You can give your feedback on this resource by <a class="govuk-link" href="mailto:lorithomson@hotmail.co.uk">email</a>.'
  }) }}
{% endblock %}

{% block header %}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9Y3P52P0K3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9Y3P52P0K3');
  </script>
  <header class="govuk-header" role="banner" data-module="govuk-header">
    <div class="govuk-header__container govuk-width-container">
      <div class="govuk-header__logo">
        <a href="/" class="govuk-header__link govuk-header__link--homepage">
                   <img src="{{asset_path}}images/ghost_logo.png"
               alt="Department for Supernatural Affairs"
               class="ghost-logo"
               width="250" height="60">
        </a>
      </div>
      {% if serviceName %}
      <div class="govuk-header__content">
        <a href="/" class="govuk-header__link govuk-header__service-name">
          {{ serviceName }}
        </a>
      </div>
      {% endif %}
    </div>
  </header>

{% endblock %}


{% block stylesheets %}
  {{ super() }}
  <style>
    /* ===============================
       DEPARTMENT FOR SUPERNATURAL AFFAIRS THEME
       =============================== */

    :root {
      --spooky-accent: #6f42c1;           /* main purple */
      --spooky-accent-dark: #4b2b85;      /* darker purple */
      --spooky-accent-light: #cdb4ff;     /* lighter ghostly purple */
      --spooky-bg: #1b103a;               /* midnight background */
      --pumpkin-orange: #ff9100;
       --govuk-focus-colour: #00b140 !important; /* spooky green */
    }
/* Optional – improves contrast for skip link & keyboard focus */
.govuk-skip-link:focus {
  background-color: #00b140 !important;
  color: #000000 !important;
  box-shadow: 0 0 8px rgba(0, 177, 64, 0.6);
}

    html, body {
      --govuk-link-colour: var(--spooky-accent) !important;
      --govuk-link-hover-colour: var(--spooky-accent-light) !important;
      --govuk-link-visited-colour: var(--spooky-accent-dark) !important;
           --govuk-header-border-color: var(--spooky-accent) !important;
    }

    /* HEADER ======================================= */
    .govuk-header {
      background-color: var(--spooky-bg) !important;
      border-bottom: 4px solid var(--spooky-accent) !important;
      background-image: url("/public/images/spooky-header-bats.png");
      background-repeat: no-repeat;
      background-position: right bottom;
      background-size: contain;
    }

    /* GOV.UK logo recolour */
    .govuk-header__logotype-crown,
    .govuk-header__logotype-text {
      fill: var(--spooky-accent-light) !important;
      color: var(--spooky-accent-light) !important;
    }

    
    
   /* Force service name link to white text */
.govuk-header__link.govuk-header__service-name {
  color: #ffffff !important;
  font-weight: 600 !important;
  text-decoration: none !important;
}

/* On hover/focus — soft spooky glow */
.govuk-header__link.govuk-header__service-name:hover,
.govuk-header__link.govuk-header__service-name:focus {
  color: var(--spooky-accent-light) !important;
  text-shadow: 0 0 6px var(--spooky-accent-light);
}

    .govuk-header__link--homepage:hover,
    .govuk-header__link--service-name:hover {
      color: var(--spooky-accent-light) !important;
      text-shadow: 0 0 4px var(--spooky-accent-light);
    }

    /* Main Links =================================== */
    a, .govuk-link {
      color: var(--spooky-accent) !important;
    }
    a:hover, .govuk-link:hover {
      color: var(--spooky-accent-light) !important;
    }
    a:visited {
      color: var(--spooky-accent-dark) !important;
    }

    /* BUTTONS ====================================== */
    .govuk-button,
    .govuk-button--start {
      background-color: var(--spooky-accent) !important;
      background-image: none !important;
      border: 2px solid var(--spooky-accent-dark) !important;
      color: #ffffff !important;
      font-weight: bold !important;
      box-shadow: none !important;
      text-shadow: none !important;
      transition: all 0.3s ease-in-out;
    }

    .govuk-button:hover,
    .govuk-button--start:hover {
      background-color: var(--spooky-accent-dark) !important;
      color: #ffffff !important;
      box-shadow: 0 0 8px var(--spooky-accent-light);
      transform: scale(1.02);
    }

    .govuk-button:focus,
    .govuk-button--start:focus {
      background-color: var(--spooky-accent-dark) !important;
      color: #ffffff !important;
      outline: 3px solid var(--spooky-accent-light) !important;
      box-shadow: 0 0 12px 4px var(--spooky-accent-light);
      animation: ghostPulse 1.5s infinite ease-in-out;
    }

    .govuk-button:active,
    .govuk-button--start:active {
      animation: none !important;
      transform: scale(0.98);
    }

    .govuk-button--start .govuk-button__start-icon path {
      fill: #ffffff !important;
    }

    .govuk-button--start:visited,
    .govuk-button:visited {
      color: #ffffff !important;
    }

    @keyframes ghostPulse {
      0% { box-shadow: 0 0 6px 2px var(--spooky-accent-light); }
      50% { box-shadow: 0 0 12px 6px var(--spooky-accent-light); }
      100% { box-shadow: 0 0 6px 2px var(--spooky-accent-light); }
    }

    /* Headings ===================================== */
    .govuk-heading-xl,
    .govuk-heading-l,
    .govuk-heading-m {
      color: #0b0c0c !important;
      text-shadow: none !important;
    }

    /* FOOTER ======================================= */
.govuk-footer {
  background: var(--spooky-bg) !important;
  border-top: 4px solid var(--spooky-accent) !important;
  color: #e0e0ff !important;

  /* mist image */
  background-image: url("/public/images/spooky-footer-mist.png");
  background-repeat: repeat-x;
  background-position: bottom center;
  /* make the mist a fixed height so it reliably reaches the bottom */
  background-size: auto 90px;

  padding-top: 2rem;
  padding-bottom: 2rem !important;
  margin-bottom: 0 !important;

  position: relative;       /* <- needed for the seam fixer */
  overflow: hidden;         /* keep pseudo-element clipped */
}
/* Remove original Crown and licence logos */
.govuk-footer__licence-logo,
.govuk-footer__copyright-logo,
.govuk-footer__crown {
  display: none !important;
}

/* Add a 🎃 pumpkin before the copyright text */
.govuk-footer__copyright::before {
  content: "🎃 ";
  font-size: 1.2rem;
  vertical-align: middle;
  margin-right: 0.25rem;
  filter: drop-shadow(0 0 4px var(--spooky-accent-light));
  transition: filter 0.3s ease;
}
/* Tiny seam fixer to cover any 1px aliasing/rounding at the very bottom */
.govuk-footer::after {
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 6px;                            /* small paint strip */
  background-color: var(--spooky-bg);     /* same as footer bg */
}

/* Footer links */
.govuk-footer a { color: var(--spooky-accent-light) !important; }
.govuk-footer a:hover { color: #ffffff !important; }

/* Remove Crown logo entirely */
.govuk-footer__licence-logo,
.govuk-footer__copyright-logo { display: none !important; }

/* footer layout */
.govuk-footer__meta { text-align: center; }
.govuk-footer__meta-item--grow { flex-grow: 1; }

/* ============================
   Ghost logo – improved contrast + pulsing glow
   ============================ */
.govuk-header__logo {
  background: rgba(255, 255, 255, 0.1); /* faint mist behind logo */
  border-radius: 6px;
  padding: 0.25rem 0.5rem;
}

/* Hidden spooky links — detectable by accessibility tools */
.spooky-hidden {
  position: absolute;
  left: -9999px; /* moves it off-screen */
  opacity: 0.01; /* nearly invisible but still present */
  transition: all 0.4s ease;
  z-index: 2000; /* higher than headers/footers */
}

.spooky-hidden:focus,
.spooky-hidden:hover {
  left: 0; /* bring it back on screen */
  opacity: 1;
  background: #fbfdfd;
  color: #00ff00;
  padding: 8px 12px;
  border-radius: 8px;
  z-index: 999;
  font-weight: bold;
  text-decoration: none;
  box-shadow: 0 0 12px #00ff00;
}

/* Optional flicker effect for extra spookiness */
.spooky-hidden:focus {
  animation: flicker 1s infinite alternate;
}

@keyframes flicker {
  0% { opacity: 0.5; }
  100% { opacity: 1; }
}
/* Per-page positioning */
.ghost-top-left:focus,
.ghost-top-left:hover {
  top: 20px;
  left: 20px;
}

.ghost-bottom-right:focus,
.ghost-bottom-right:hover {
  bottom: 30px;
  right: 40px;
}

.ghost-middle:focus,
.ghost-middle:hover {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.ghost-behind-button:focus,
.ghost-behind-button:hover {
  top: 80%;
  left: 10%;
}

/* ============================
   Ghost logo – soft glow only
   ============================ */

/* Remove background “mist” entirely */
.govuk-header__logo {
  background: none !important;
  border-radius: 0;
  padding: 0.25rem 0; /* small top/bottom spacing only */
}

.ghost-logo {
  display: block;
  max-height: 120px; /* slightly larger for balance */
  object-fit: contain;

  /* subtle edge-only glow for visibility */
  filter:
    drop-shadow(0 0 2px rgba(255,255,255,0.5))
    drop-shadow(0 0 5px rgba(255,255,255,0.6))
    drop-shadow(0 0 8px rgba(255,255,255,0.7));

  transition: filter 0.3s ease-in-out;
}

.ghost-logo:hover {
  filter:
    drop-shadow(0 0 4px rgba(255,255,255,0.7))
    drop-shadow(0 0 8px rgba(255,255,255,0.9))
    drop-shadow(0 0 12px var(--pumpkin-orange))
    brightness(1.3);
}


/* Error message text */
.govuk-error-message {
  color: #00b140 !important; /* bright green instead of red */
}

/* Error field borders and glow */
.govuk-form-group--error .govuk-input,
.govuk-form-group--error .govuk-textarea,
.govuk-form-group--error .govuk-select {
  border-color: #00b140 !important;
  box-shadow: 0 0 6px 2px rgba(0, 177, 64, 0.4) !important;
  background-color: rgba(0, 255, 0, 0.03) !important;
}

/* Highlight entire form group */
.govuk-form-group--error {
  border-left: 4px solid #00b140 !important;
  padding-left: 0.75rem;
}

/* Error summary box */
.govuk-error-summary {
  border-color: #00b140 !important;
  box-shadow: 0 0 10px rgba(0, 177, 64, 0.4);
}

/* Error summary text + links */
.govuk-error-summary__title,
.govuk-error-summary__list a {
  color: #00b140 !important;
}

.govuk-error-summary__list a:hover {
  color: #7fff7f !important;
  text-shadow: 0 0 4px #7fff7f;
}

/* ============================
   SPOOKY PHASE BANNER (white background)
   ============================ */
.govuk-phase-banner {
  background-color: #ffffff !important; /* clean GOV.UK white */
  border-top: 0px solid var(--spooky-accent) !important;   /* thin top border */
  border-bottom: 4px solid var(--spooky-accent) !important; /* matching bottom border */
  color: #0b0c0c !important;
  box-shadow: 0 0 6px rgba(111, 66, 193, 0.2); /* soft purple glow */
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

.govuk-phase-banner__content {
  color: #0b0c0c !important;
}

.govuk-phase-banner__text {
  color: #0b0c0c !important;
}

/* ============================
   Phase banner "Training" tag – scoped styling only
   ============================ */
.govuk-phase-banner .govuk-tag {
  background-color: #00b140; /* bright green */
  color: #ffffff;
  font-weight: 700;
  border: 2px solid #007f2e;
  box-shadow: 0 0 4px rgba(0, 177, 64, 0.4);
  text-transform: none;
  letter-spacing: 0.5px;
}

.govuk-phase-banner .govuk-tag:hover,
.govuk-phase-banner .govuk-tag:focus {
  background-color: #009e38;
  border-color: #00b140;
  box-shadow: 0 0 8px rgba(0, 255, 128, 0.6);
}

.govuk-phase-banner a.govuk-link {
  color: var(--spooky-accent) !important;
  text-decoration: underline;
}

.govuk-phase-banner a.govuk-link:hover,
.govuk-phase-banner a.govuk-link:focus {
  color: var(--spooky-accent-dark) !important;
  text-shadow: 0 0 3px var(--spooky-accent-light);
}



/* Buttons (GOV.UK uses box-shadow for focus) */
.govuk-button:focus,
.govuk-button--start:focus {
  outline: 3px solid transparent !important;
  box-shadow: 0 0 0 4px #00b140 !important;
}

/* Text inputs, textareas, selects */
.govuk-input:focus,
.govuk-textarea:focus,
.govuk-select:focus {
  outline: 3px solid transparent !important;
  box-shadow: 0 0 0 3px #00b140 !important;
}

/* Radios & checkboxes (focus ring draws on the pseudo box) */
.govuk-radios__input:focus + .govuk-radios__label::before,
.govuk-checkboxes__input:focus + .govuk-checkboxes__label::before {
  box-shadow: 0 0 0 3px #00b140 !important;
}

/* Skip link */
.govuk-skip-link:focus {
  background-color: #00b140 !important;
  color: #000 !important;
  box-shadow: 0 0 0 3px #00b140 !important;
}

/* Details summary */
.govuk-details__summary:focus {
  outline: 3px solid #00b140 !important;
  box-shadow: 0 0 0 3px #00b140 !important;
}

/* Tabs */
.govuk-tabs__tab:focus {
  box-shadow: 0 0 0 3px #00b140 !important;
}

/* Keep input + button on one line and aligned */
.password-inline{
  display:flex;
  align-items:center;   /* vertical alignment */
  gap:1rem;             /* space between input and button */
  flex-wrap:wrap;       /* lets it wrap on small screens */
}

/* Remove default top margin that pushes the button down */
.password-inline .govuk-button{
  margin:0 !important;
}

/* Mobile: stack neatly */
@media (max-width:640px){
  .password-inline{ flex-direction:column; align-items:flex-start; }
  .password-inline .govuk-button{ width:auto; }
}

/* ============================
   Override GOV.UK Transport font → Arial
   ============================ */

html, body,
.govuk-body,
.govuk-heading-xl,
.govuk-heading-l,
.govuk-heading-m,
.govuk-heading-s,
.govuk-label,
.govuk-hint,
.govuk-input,
.govuk-textarea,
.govuk-select,
.govuk-button,
.govuk-phase-banner,
.govuk-link {
  font-family: Arial, Helvetica, sans-serif !important;
}

/* Ensure headings keep good weight */
.govuk-heading-xl,
.govuk-heading-l,
.govuk-heading-m,
.govuk-heading-s {
  font-weight: 700 !important;
}
  </style>
{% endblock %}

{% block footer %}
  {{ govukFooter({
    meta: {
      items: [
           { href: "/manage-prototype/clear-data", text: "Clear data" },
                  { href: "/tasklist", text: "View your reports" },
        { href: "/guidance", text: "How to spot a ghost" },
         { href: "/accessibility", text: "Accessibility statement" },
          { href: "/about", text: "About this service" },
        { href: "https://github.com/Lori-T", text: "GitHub" }
       
      ],
      visuallyHiddenTitle: "Footer links"
    },
    contentLicence: {
      text: "© 2025 Department for Supernatural Affairs "
         }
  }) }}
{% endblock %}
