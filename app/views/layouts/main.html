{% extends "govuk-prototype-kit/layouts/govuk-branded.njk" %}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}
{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "Training"
    },
    html: 'This is not a real service â€“ this is for training purposes only. You can give your feedback on this resource by <a class="govuk-link" href="mailto:lorithomson@hotmail.co.uk">email</a>.'
  }) }}
{% endblock %}

{% block header %}
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9Y3P52P0K3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9Y3P52P0K3');
  </script>
  <header class="govuk-header" role="banner" data-module="govuk-header">
    <div class="govuk-header__container govuk-width-container">
      <div class="govuk-header__logo">
        <a href="/" class="govuk-header__link govuk-header__link--homepage">
                   <img src="{{asset_path}}images/ghost_logo.png"
               alt="Department for Supernatural Affairs"
               class="ghost-logo"
               width="250" height="60">
        </a>
      </div>
      {% if serviceName %}
      <div class="govuk-header__content">
        <a href="/" class="govuk-header__link govuk-header__service-name">
          {{ serviceName }}
        </a>
      </div>
      {% endif %}
    </div>
  </header>

{% endblock %}


{% block stylesheets %}
  {{ super() }}
  <style>
    /* ===============================
       DEPARTMENT FOR SUPERNATURAL AFFAIRS THEME
       =============================== */

    :root {
      --spooky-accent: #6f42c1;           /* main purple */
      --spooky-accent-dark: #4b2b85;      /* darker purple */
      --spooky-accent-light: #cdb4ff;     /* lighter ghostly purple */
      --spooky-bg: #1b103a;               /* midnight background */
      --pumpkin-orange: #ff9100;
    }

    html, body {
      --govuk-link-colour: var(--spooky-accent) !important;
      --govuk-link-hover-colour: var(--spooky-accent-light) !important;
      --govuk-link-visited-colour: var(--spooky-accent-dark) !important;
      --govuk-focus-colour: var(--spooky-accent-light) !important;
      --govuk-header-border-color: var(--spooky-accent) !important;
    }

    /* HEADER ======================================= */
    .govuk-header {
      background-color: var(--spooky-bg) !important;
      border-bottom: 4px solid var(--spooky-accent) !important;
      background-image: url("/public/images/spooky-header-bats.png");
      background-repeat: no-repeat;
      background-position: right bottom;
      background-size: contain;
    }

    /* GOV.UK logo recolour */
    .govuk-header__logotype-crown,
    .govuk-header__logotype-text {
      fill: var(--spooky-accent-light) !important;
      color: var(--spooky-accent-light) !important;
    }

    
    
   /* Force service name link to white text */
.govuk-header__link.govuk-header__service-name {
  color: #ffffff !important;
  font-weight: 600 !important;
  text-decoration: none !important;
}

/* On hover/focus â€” soft spooky glow */
.govuk-header__link.govuk-header__service-name:hover,
.govuk-header__link.govuk-header__service-name:focus {
  color: var(--spooky-accent-light) !important;
  text-shadow: 0 0 6px var(--spooky-accent-light);
}

    .govuk-header__link--homepage:hover,
    .govuk-header__link--service-name:hover {
      color: var(--spooky-accent-light) !important;
      text-shadow: 0 0 4px var(--spooky-accent-light);
    }

    /* Main Links =================================== */
    a, .govuk-link {
      color: var(--spooky-accent) !important;
    }
    a:hover, .govuk-link:hover {
      color: var(--spooky-accent-light) !important;
    }
    a:visited {
      color: var(--spooky-accent-dark) !important;
    }

    /* BUTTONS ====================================== */
    .govuk-button,
    .govuk-button--start {
      background-color: var(--spooky-accent) !important;
      background-image: none !important;
      border: 2px solid var(--spooky-accent-dark) !important;
      color: #ffffff !important;
      font-weight: bold !important;
      box-shadow: none !important;
      text-shadow: none !important;
      transition: all 0.3s ease-in-out;
    }

    .govuk-button:hover,
    .govuk-button--start:hover {
      background-color: var(--spooky-accent-dark) !important;
      color: #ffffff !important;
      box-shadow: 0 0 8px var(--spooky-accent-light);
      transform: scale(1.02);
    }

    .govuk-button:focus,
    .govuk-button--start:focus {
      background-color: var(--spooky-accent-dark) !important;
      color: #ffffff !important;
      outline: 3px solid var(--spooky-accent-light) !important;
      box-shadow: 0 0 12px 4px var(--spooky-accent-light);
      animation: ghostPulse 1.5s infinite ease-in-out;
    }

    .govuk-button:active,
    .govuk-button--start:active {
      animation: none !important;
      transform: scale(0.98);
    }

    .govuk-button--start .govuk-button__start-icon path {
      fill: #ffffff !important;
    }

    .govuk-button--start:visited,
    .govuk-button:visited {
      color: #ffffff !important;
    }

    @keyframes ghostPulse {
      0% { box-shadow: 0 0 6px 2px var(--spooky-accent-light); }
      50% { box-shadow: 0 0 12px 6px var(--spooky-accent-light); }
      100% { box-shadow: 0 0 6px 2px var(--spooky-accent-light); }
    }

    /* Headings ===================================== */
    .govuk-heading-xl,
    .govuk-heading-l,
    .govuk-heading-m {
      color: #0b0c0c !important;
      text-shadow: none !important;
    }

    /* FOOTER ======================================= */
.govuk-footer {
  background: var(--spooky-bg) !important;
  border-top: 4px solid var(--spooky-accent) !important;
  color: #e0e0ff !important;

  /* mist image */
  background-image: url("/public/images/spooky-footer-mist.png");
  background-repeat: repeat-x;
  background-position: bottom center;
  /* make the mist a fixed height so it reliably reaches the bottom */
  background-size: auto 90px;

  padding-top: 2rem;
  padding-bottom: 2rem !important;
  margin-bottom: 0 !important;

  position: relative;       /* <- needed for the seam fixer */
  overflow: hidden;         /* keep pseudo-element clipped */
}
/* Remove original Crown and licence logos */
.govuk-footer__licence-logo,
.govuk-footer__copyright-logo,
.govuk-footer__crown {
  display: none !important;
}

/* Add a ðŸŽƒ pumpkin before the copyright text */
.govuk-footer__copyright::before {
  content: "ðŸŽƒ ";
  font-size: 1.2rem;
  vertical-align: middle;
  margin-right: 0.25rem;
  filter: drop-shadow(0 0 4px var(--spooky-accent-light));
  transition: filter 0.3s ease;
}
/* Tiny seam fixer to cover any 1px aliasing/rounding at the very bottom */
.govuk-footer::after {
  content: "";
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 6px;                            /* small paint strip */
  background-color: var(--spooky-bg);     /* same as footer bg */
}

/* Footer links */
.govuk-footer a { color: var(--spooky-accent-light) !important; }
.govuk-footer a:hover { color: #ffffff !important; }

/* Remove Crown logo entirely */
.govuk-footer__licence-logo,
.govuk-footer__copyright-logo { display: none !important; }

/* footer layout */
.govuk-footer__meta { text-align: center; }
.govuk-footer__meta-item--grow { flex-grow: 1; }

/* ============================
   Ghost logo â€“ improved contrast + pulsing glow
   ============================ */
.govuk-header__logo {
  background: rgba(255, 255, 255, 0.1); /* faint mist behind logo */
  border-radius: 6px;
  padding: 0.25rem 0.5rem;
}

.ghost-logo {
  display: block;
  max-height: 85px;
  object-fit: contain;
  filter: drop-shadow(0 0 4px rgba(255,255,255,0.9))
          drop-shadow(0 0 8px rgba(255,255,255,0.6));
  animation: ghostlyGlow 4s ease-in-out infinite;
  transition: filter 0.3s ease-in-out;
}

.ghost-logo:hover {
  filter: drop-shadow(0 0 10px var(--pumpkin-orange))
          brightness(1.3);
}

/* pulsing glow animation */
@keyframes ghostlyGlow {
  0% {
    filter: drop-shadow(0 0 2px rgba(255,255,255,0.6))
            drop-shadow(0 0 4px rgba(255,255,255,0.5));
  }
  50% {
    filter: drop-shadow(0 0 6px rgba(255,255,255,0.9))
            drop-shadow(0 0 10px rgba(255,255,255,0.8));
  }
  100% {
    filter: drop-shadow(0 0 2px rgba(255,255,255,0.6))
            drop-shadow(0 0 4px rgba(255,255,255,0.5));
  }
}



/* Error message text */
.govuk-error-message {
  color: #00b140 !important; /* bright green instead of red */
}

/* Error field borders and glow */
.govuk-form-group--error .govuk-input,
.govuk-form-group--error .govuk-textarea,
.govuk-form-group--error .govuk-select {
  border-color: #00b140 !important;
  box-shadow: 0 0 6px 2px rgba(0, 177, 64, 0.4) !important;
  background-color: rgba(0, 255, 0, 0.03) !important;
}

/* Highlight entire form group */
.govuk-form-group--error {
  border-left: 4px solid #00b140 !important;
  padding-left: 0.75rem;
}

/* Error summary box */
.govuk-error-summary {
  border-color: #00b140 !important;
  box-shadow: 0 0 10px rgba(0, 177, 64, 0.4);
}

/* Error summary text + links */
.govuk-error-summary__title,
.govuk-error-summary__list a {
  color: #00b140 !important;
}

.govuk-error-summary__list a:hover {
  color: #7fff7f !important;
  text-shadow: 0 0 4px #7fff7f;
}

/* ============================
   SPOOKY PHASE BANNER (white background)
   ============================ */
.govuk-phase-banner {
  background-color: #ffffff !important; /* clean GOV.UK white */
  border-top: 0px solid var(--spooky-accent) !important;   /* thin top border */
  border-bottom: 4px solid var(--spooky-accent) !important; /* matching bottom border */
  color: #0b0c0c !important;
  box-shadow: 0 0 6px rgba(111, 66, 193, 0.2); /* soft purple glow */
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

.govuk-phase-banner__content {
  color: #0b0c0c !important;
}

.govuk-phase-banner__text {
  color: #0b0c0c !important;
}

/* Training tag â€” bright supernatural green */
.govuk-tag {
  background-color: #00b140; /* accessible bright green */
  color: #ffffff;
  font-weight: 700;
  border: 2px solid #007f2e; /* darker green border */
  box-shadow: 0 0 4px rgba(0, 177, 64, 0.4);
  text-transform: none;
  letter-spacing: 0.5px;
}

/* Slight glow on hover/focus */
.govuk-tag:hover,
.govuk-tag:focus {
  background-color: #009e38;
  border-color: #00b140;
  box-shadow: 0 0 8px rgba(0, 255, 128, 0.6);
}

.govuk-phase-banner a.govuk-link {
  color: var(--spooky-accent) !important;
  text-decoration: underline;
}

.govuk-phase-banner a.govuk-link:hover,
.govuk-phase-banner a.govuk-link:focus {
  color: var(--spooky-accent-dark) !important;
  text-shadow: 0 0 3px var(--spooky-accent-light);
}

  </style>
{% endblock %}

{% block footer %}
  {{ govukFooter({
    meta: {
      items: [
           { href: "/manage-prototype/clear-data", text: "Clear data" },
           { href: "/accessibility", text: "Accessibility statement" },
        { href: "/tasklist", text: "View your reports" },
        { href: "/guidance", text: "How to spot a ghost" },
        { href: "https://github.com/Lori-T", text: "GitHub" },
        { href: "https://accessibility-advent.lorithomson.co.uk", text: "Accessibility Advent" }
      ],
      visuallyHiddenTitle: "Footer links"
    },
    contentLicence: {
      text: "Â© 2025 Department for Supernatural Affairs "
         }
  }) }}
{% endblock %}
