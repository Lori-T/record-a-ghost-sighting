{% extends "layouts/main.html" %}

{% set pageName="Home" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <h1 class="govuk-heading-xl spooky-heading">
      Record a ghost sighting 
    </h1>

    <p class="govuk-body">
      Welcome to the <strong>Department for Supernatural Affairs</strong> service to record a ghost sighting.
      This haunted GOV.UK-style service contains intentional accessibility issues, your job is to find them all.
    </p>

    <p class="govuk-body">
      Each page of this service contains one or more accessibility issues (and perhaps a lurking ghost üëª).
    </p>
  
    {{ govukButton({
      text: "Start the haunted service",
      href: "/start",
      isStartButton: true
    }) }}

    <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

    <h2 class="govuk-heading-m">Answers</h2>
    <p class="govuk-body">
      Enter the secret password to unlock the list of intentional accessibility issues.  
      (Hint: The ghosts will give you a clue to the password to see the answers and get a special <em>spooky</em> treat.)
    </p>

    <form id="password-form" class="govuk-form-group">
      <label class="govuk-label" for="trainer-password">Enter password</label>
      <input class="govuk-input govuk-input--width-20" id="trainer-password" type="password" name="trainer-password">
      <button class="govuk-button govuk-!-margin-top-2" type="submit">Unlock answers</button>
    </form>

    <div id="toggle-section" style="display: none; margin-top: 2rem;">
      <button class="govuk-button govuk-button--secondary" id="toggle-answers"
              type="button"
              aria-controls="answers-section"
              aria-expanded="false">
        Show answers
      </button>
    </div>

    <div id="answers-section" style="display: none; margin-top: 2rem;">
      <h2 class="govuk-heading-m">Pages in this prototype</h2>

      <table class="govuk-table">
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Page name</th>
            <th scope="col" class="govuk-table__header">URL</th>
            <th scope="col" class="govuk-table__header">Intentional accessibility issues</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Start page</td>
            <td class="govuk-table__cell"><a href="/start">/start</a></td>
            <td class="govuk-table__cell">
              <p><strong>Incorrect heading hierarchy</strong> ‚Äì main heading uses wrong tag level.</p>
              <p><strong>Undescriptive link text</strong> ‚Äì ‚ÄúFind out more‚Äù gives no context.</p>
              <p><strong>Link opens in new tab</strong> ‚Äì without warning or indication.</p>
              <p><strong>Inconsistent tab order</strong> ‚Äì sidebar links are unpredictable when tabbing.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Question 1 ‚Äì Witness details</td>
            <td class="govuk-table__cell"><a href="/question1">/question1</a></td>
            <td class="govuk-table__cell">
              <p><strong>Low contrast hint text</strong> ‚Äì form hints fail colour contrast ratio.</p>
              <p><strong>Continue button not focusable</strong> ‚Äì <code>tabindex="-1"</code> removes it from keyboard navigation.</p>
              <p><strong>Hidden focusable element</strong> ‚Äì an invisible link is reachable by keyboard.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Question 2 ‚Äì Type of ghost sighting</td>
            <td class="govuk-table__cell"><a href="/question2">/question2</a></td>
            <td class="govuk-table__cell">
              <p><strong>Checkboxes without fieldset or legend</strong> ‚Äì no semantic grouping for screen readers.</p>
              <p><strong>Unclear instructions</strong> ‚Äì users are not told they can select more than one.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Question 3 ‚Äì Date and location of sighting</td>
            <td class="govuk-table__cell"><a href="/question3">/question3</a></td>
            <td class="govuk-table__cell">
              <p><strong>Empty legend</strong> ‚Äì form fields are not grouped meaningfully.</p>
              <p><strong>Errors not linked to inputs</strong> ‚Äì missing ARIA associations.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Question 4 ‚Äì What did you see?</td>
            <td class="govuk-table__cell"><a href="/question4">/question4</a></td>
            <td class="govuk-table__cell">
              <p><strong>Hidden focusable link</strong> ‚Äì non-visible interactive element disrupts focus order.</p>
              <p><strong>Missing label association</strong> ‚Äì unclear for screen reader users.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Question 5 ‚Äì Supernatural activity intensity</td>
            <td class="govuk-table__cell"><a href="/question5">/question5</a></td>
            <td class="govuk-table__cell">
              <p><strong>No fieldset or legend</strong> ‚Äì radio buttons lack question context.</p>
              <p><strong>Error summary not initially visible</strong> ‚Äì poor error discoverability.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Question 6 ‚Äì Upload evidence</td>
            <td class="govuk-table__cell"><a href="/question6">/question6</a></td>
            <td class="govuk-table__cell">
              <p><strong>No proper file input label</strong> ‚Äì unclear what to upload.</p>
              <p><strong>Missing accessible instructions</strong> ‚Äì relies solely on visual layout.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Check your answers</td>
            <td class="govuk-table__cell"><a href="/checkanswers">/checkanswers</a></td>
            <td class="govuk-table__cell">
              <p><strong>Undescriptive change links</strong> ‚Äì ‚ÄúChange‚Äù lacks hidden context.</p>
              <p><strong>No table caption</strong> ‚Äì unclear content structure for screen readers.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Confirmation page</td>
            <td class="govuk-table__cell"><a href="/confirmation">/confirmation</a></td>
            <td class="govuk-table__cell">
              <p><strong>All caps heading</strong> ‚Äì harder to read for some users.</p>
              <p><strong>No clear route back</strong> ‚Äì users may not know how to restart.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Task list</td>
            <td class="govuk-table__cell"><a href="/tasklist">/tasklist</a></td>
            <td class="govuk-table__cell">
              <p><strong>Status relies only on colour</strong> ‚Äì fails WCAG 1.4.1.</p>
              <p><strong>No table caption</strong> ‚Äì screen readers lack context.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Guidance ‚Äì How to spot a ghost</td>
            <td class="govuk-table__cell"><a href="/guidance">/guidance</a></td>
            <td class="govuk-table__cell">
              <p><strong>Decorative images missing alt text</strong> ‚Äì may confuse screen reader users.</p>
              <p><strong>Heading order skipped</strong> ‚Äì h2 used before h1 in sidebar.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Guidance ‚Äì Different types of haunting</td>
            <td class="govuk-table__cell"><a href="/guidance1">/guidance1</a></td>
            <td class="govuk-table__cell">
              <p><strong>Unlabelled navigation region</strong> ‚Äì missing ARIA label.</p>
              <p><strong>Low-contrast links</strong> ‚Äì blue on grey background.</p>
            </td>
          </tr>

          <tr class="govuk-table__row">
            <td class="govuk-table__cell">Guidance ‚Äì How to report a haunting</td>
            <td class="govuk-table__cell"><a href="/guidance2">/guidance2</a></td>
            <td class="govuk-table__cell">
              <p><strong>Non-descriptive link text</strong> ‚Äì ‚Äúrecord your ghost sighting online‚Äù could be clearer.</p>
              <p><strong>Empty anchor tags</strong> ‚Äì decorative links serve no function.</p>
            </td>
          </tr>

        </tbody>
      </table>
    </div>

  </div>
</div>

<script>
  const form = document.getElementById('password-form');
  const answersSection = document.getElementById('answers-section');
  const toggleSection = document.getElementById('toggle-section');
  const toggleButton = document.getElementById('toggle-answers');

  form.addEventListener('submit', function (event) {
    event.preventDefault();
    const password = document.getElementById('trainer-password').value.trim().toLowerCase();

    if (password === 'spooky') {
      toggleSection.style.display = 'block';
      form.style.display = 'none';
    } else {
      alert('üëª Incorrect password! The spirits are displeased. Try again.');
    }
  });

  toggleButton.addEventListener('click', function () {
    const visible = answersSection.style.display === 'block';
    answersSection.style.display = visible ? 'none' : 'block';
    toggleButton.textContent = visible ? 'Show answers' : 'Hide answers';
    toggleButton.setAttribute('aria-expanded', (!visible).toString());
  });
</script>

{% endblock %}
