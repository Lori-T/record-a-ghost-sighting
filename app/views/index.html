{% extends "layouts/main.html" %}
{% block pageTitle %}
 Home – {{ serviceName }} 
{% endblock %}

{% set pageName="Home" %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <h1 class="govuk-heading-xl spooky-heading">
      Record a ghost sighting
    </h1>

    <p class="govuk-body">
      Welcome to the <strong>Department for Supernatural Affairs</strong> service to record a ghost sighting.
      This spooky service contains intentional accessibility issues — your job is to find them all. You can use haunted tools like <a href="https://wave.webaim.org/" class="govuk-link">Wave</a>, navigate using your keyboard or use other automated and manual tools to help find them. Some might be tricker than others. 
    </p>

    <p class="govuk-body">
      Each page contains one or more accessibility issues (and perhaps a lurking ghost 👻).
    </p>

    {{ govukButton({
      text: "Start the haunted service",
      href: "/start",
      isStartButton: true
    }) }}

    <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

    <h2 class="govuk-heading-m">Think you’ve solved the mystery…</h2>

    <p class="govuk-body">
      Enter the secret password to unlock the list of intentional accessibility issues.  
      (Hint: the ghosts will whisper clues to the password — reveal them all to claim your <em>spooky</em> badge.)
    </p>

    <form id="password-form" class="govuk-form-group">
  <label class="govuk-label" for="trainer-password">Enter password</label>

  <div class="password-inline">
    <input class="govuk-input govuk-input--width-20"
           id="trainer-password" type="password" name="trainer-password">
    <button class="govuk-button" type="submit">Unlock answers</button>
  </div>
</form>

    <!-- Toggle section (revealed after correct password) -->
    <div id="toggle-section" style="display: none; margin-top: 2rem;">
      <button class="govuk-button govuk-button--secondary" id="toggle-answers"
              type="button"
              aria-controls="answers-section"
              aria-expanded="false">
        Show answers
      </button>

      <!-- Hidden answers -->
      <div id="answers-section" style="display: none; margin-top: 2rem;">
        <h2 class="govuk-heading-l">Answers</h2>

        <h3 class="govuk-heading-m">Pages in this prototype</h3>

        <table class="govuk-table">
          <thead class="govuk-table__head">
            <tr class="govuk-table__row">
              <th scope="col" class="govuk-table__header">Page name</th>
              <th scope="col" class="govuk-table__header">URL</th>
              <th scope="col" class="govuk-table__header">Intentional accessibility issues</th>
            </tr>
          </thead>
          <tbody class="govuk-table__body">

         <!-- START PAGE -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Start page</td>
  <td class="govuk-table__cell"><a href="/start">/start</a></td>
  <td class="govuk-table__cell">
    <p><strong>Incorrect heading hierarchy</strong> – more than one <code>h1</code> used on the same page (1.3.1).</p>
    <p><strong>Undescriptive link text</strong> – “Find out more” gives no context (2.4.4).</p>
    <p><strong>Link opens in new tab without warning</strong> – <code>target="_blank"</code> used without informing users (3.2.5).</p>
    <p><strong>Focus indicator removed</strong> – <code>.no-focus-outline</code> hides visible focus (2.4.7).</p>
    <p><strong>Unpredictable tab order</strong> – reversed layout disrupts logical keyboard navigation (2.4.3).</p>
    <p><strong>Low contrast link styling</strong> – link colour insufficient contrast with background (1.4.3).</p>
    <p><strong>Low contrast focus indicator</strong> – yellow focus outline on white service name text fails non-text contrast (1.4.11).</p>
  </td>
</tr>

            <!-- QUESTION 1 -->
          <tr class="govuk-table__row">
  <td class="govuk-table__cell">Question 1 – Witness details</td>
  <td class="govuk-table__cell"><a href="/question1">/question1</a></td>
  <td class="govuk-table__cell">
    <p><strong>Low contrast error text</strong> – green error messages may not meet minimum contrast ratio (1.4.3).</p>
    <p><strong>Continue button not focusable</strong> – <code>tabindex="-1"</code> removes it from keyboard navigation (2.1.1).</p>
    <p><strong>Hidden focusable link</strong> – off-screen ghost clue link can receive focus and confuse order (1.3.1).</p>
    <p><strong>Low contrast focus indicator</strong> – yellow focus outline on white service name text does not meet non-text contrast requirements (1.4.11).</p>
  </td>
</tr>

          <!-- QUESTION 2 -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Question 2 – Type of ghost sighting</td>
  <td class="govuk-table__cell"><a href="/question2">/question2</a></td>
  <td class="govuk-table__cell">
    <p><strong>No proper fieldset or legend</strong> – checkboxes not semantically grouped or clearly described (1.3.1).</p>
    <p><strong>Continue button not keyboard focusable</strong> – <code>tabindex="-1"</code> removes it from keyboard navigation (2.1.1).</p>
    <p><strong>Hidden focusable link</strong> – off-screen ghost clue can receive focus and confuse users (1.3.1).</p>
    <p><strong>Low contrast error text</strong> – green error messages may not meet minimum contrast ratio (1.4.3).</p>
    <p><strong>Low contrast focus indicator</strong> – yellow focus outline on white header text fails non-text contrast (1.4.11).</p>
  </td>
</tr>

         <!-- QUESTION 3 -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Question 3 – Date and location of sighting</td>
  <td class="govuk-table__cell"><a href="/question3">/question3</a></td>
  <td class="govuk-table__cell">
    <p><strong>Empty legend</strong> – the date fieldset has no descriptive legend, so screen readers can’t identify the grouped inputs (1.3.1).</p>
    <p><strong>Error messages not linked to inputs</strong> – dynamically added messages lack ARIA references such as <code>aria-describedby</code> or <code>aria-invalid</code> (4.1.2).</p>
    <p><strong>Continue button not focusable</strong> – <code>tabindex="-1"</code> removes the button from the focus order (2.1.1).</p>
    <p><strong>Hidden focusable link</strong> – ghost clue link is visually hidden but can still receive keyboard focus (1.3.1).</p>
    <p><strong>Low contrast error styling</strong> – bright green text and outlines may not meet minimum contrast ratio against white background (1.4.3).</p>
  </td>
</tr>

         <!-- QUESTION 4 -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Question 4 – Description of sighting</td>
  <td class="govuk-table__cell"><a href="/question4">/question4</a></td>
  <td class="govuk-table__cell">
    <p><strong>Hidden focusable link</strong> – ghost clue link is visually hidden but can still receive focus, disrupting logical navigation (2.4.3).</p>
    <p><strong>No character count or ARIA live region</strong> – users are not informed how much text they can enter (4.1.3).</p>
    <p><strong>Continue button not keyboard focusable</strong> – <code>tabindex="-1"</code> removes the button from the tab order (2.1.1).</p>
    <p><strong>Error message not linked to input</strong> – no <code>aria-describedby</code> relationship between the error and the textarea (4.1.2).</p>
    <p><strong>Low contrast error styling</strong> – bright green text and outlines may not meet contrast ratio requirements (1.4.3).</p>
  </td>
</tr>


          <!-- QUESTION 5 -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Question 5 – Supernatural activity intensity</td>
  <td class="govuk-table__cell"><a href="/question5">/question5</a></td>
  <td class="govuk-table__cell">
    <p><strong>No fieldset or legend</strong> – radio buttons are not grouped semantically, so the question lacks context for screen readers (1.3.1).</p>
    <p><strong>Error message not linked to radio group</strong> – error text is not programmatically tied to the inputs (4.1.2).</p>
    <p><strong>Hidden focusable link</strong> – the spooky bat clue can still receive focus even though it’s visually hidden (2.4.3).</p>
    <p><strong>Continue button not keyboard focusable</strong> – <code>tabindex="-1"</code> removes it from the tab order (2.1.1).</p>
    <p><strong>Low contrast error styling</strong> – green error text and outlines may not meet minimum contrast ratio requirements (1.4.3).</p>
  </td>
</tr>


<!-- QUESTION 6 -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Question 6 – Upload evidence</td>
  <td class="govuk-table__cell"><a href="/question6">/question6</a></td>
  <td class="govuk-table__cell">
    <p><strong>Incorrect label association</strong> – label and hint are not programmatically linked to the file input (1.3.1).</p>
    <p><strong>Missing accessible instructions</strong> – unclear purpose and file type guidance for assistive technology users (3.3.2).</p>
    <p><strong>Hidden focusable link</strong> – ghost clue link is visually hidden but can still receive focus (2.4.3).</p>
    <p><strong>Continue button not keyboard focusable</strong> – <code>tabindex="-1"</code> removes it from keyboard navigation (2.1.1).</p>
    <p><strong>Low contrast error styling</strong> – green error text and outlines may not meet minimum contrast requirements (1.4.3).</p>
    <p><strong>Error message not linked to input</strong> – error text lacks an <code>aria-describedby</code> association with the file field (4.1.2).</p>
  </td>
</tr>



           <!-- CHECK ANSWERS -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Check your answers</td>
  <td class="govuk-table__cell"><a href="/checkanswers">/checkanswers</a></td>
  <td class="govuk-table__cell">
    <p><strong>Undescriptive “Change” links</strong> – identical link text without hidden context makes it unclear what each link changes (2.4.4).</p>
    <p><strong>No table caption or summary</strong> – screen readers cannot identify what information this list represents (1.3.1).</p>
    <p><strong>Inconsistent heading hierarchy</strong> – the secondary heading does not follow logical structure after the page title (1.3.1).</p>
    <p><strong>Unclear submission instructions</strong> – context before the “Accept and send” button is not programmatically associated (3.3.2).</p>
    <p><strong>Keyboard focus loss after submission</strong> – no focus management provided, causing potential disorientation for keyboard users (2.4.3).</p>
  </td>
</tr>


           <!-- CONFIRMATION -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">Confirmation page</td>
  <td class="govuk-table__cell"><a href="/confirmation">/confirmation</a></td>
  <td class="govuk-table__cell">
    <p><strong>All caps heading</strong> – “REPORT COMPLETE” reduces readability for users with dyslexia or visual impairments (1.4.8).</p>
    <p><strong>No clear route back</strong> – no consistent navigation link to return to the homepage or previous sections (2.4.5).</p>
    <p><strong>Confirmation message not programmatically identified</strong> – the panel lacks an ARIA role or landmark for assistive technologies (1.3.1).</p>
    <p><strong>No focus management after submission</strong> – keyboard focus is not moved to the confirmation message when the page loads (2.4.3).</p>
    <p><strong>Skipped heading levels</strong> – heading structure may not follow logical order, reducing navigability for screen reader users (1.3.1).</p>
  </td>
</tr>


            <!-- VIEW REPORTS -->
<tr class="govuk-table__row">
  <td class="govuk-table__cell">View your reports</td>
  <td class="govuk-table__cell"><a href="/tasklist">/tasklist</a></td>
  <td class="govuk-table__cell">
        <p><strong>No table caption</strong> – the main table has no caption or ARIA label describing its content. (1.3.1).</p>
        <p><strong>Inconsistent heading hierarchy</strong> – heading levels do not    llow a clear structure within summary cards (1.3.1).</p>
      </td>
</tr>

          </tbody>
        </table>
      </div> <!-- end answers-section -->
      <h2 class="govuk-heading-m">Found something else?</h2> 
      <p class="govuk-body">
        If think you've found any issues that aren't listed, please <a href="mailto:lorithomson@slc.co.uk">share them by email.</a>
      </p>
    </div> <!-- end toggle-section -->

    <!-- Badge section (outside toggle, shown after password unlock) -->
    <div id="badge-section" style="display: none; margin-top: 2rem;">
      <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

      <h2 class="govuk-heading-m">Claim your spooky badge</h2>

      <p class="govuk-body">
        Congratulations! You’ve uncovered all the hidden ghosts and solved every accessibility mystery.
        You’re officially part of the <strong>Ghost Spotter’s Club</strong> 👻
      </p>
<div style="text-align:center; margin-top:1rem;">
        <img src="{{ asset_path }}images/ghost-spotters-badge.png"
             alt="I'm an Accessibility Champion – Ghost Spotter’s Club badge"
             width="300" height="300"
             style="max-width:100%; height:auto;">
      </div>
      <div class="govuk-inset-text">
        <p><strong>Display your badge</strong> to show you’re an <em>Accessibility Champion Ghost Spotter!</em></p>
        <p>Copy and paste this code snippet into your HTML:</p>

        <textarea class="govuk-textarea" readonly rows="6" aria-label="Embed code for badge">
<a href="https://accessibility-advent.lorithomson.co.uk" target="_blank" rel="noopener">
  <img src="{{ asset_path }}images/ghost-spotters-badge.png"
       alt="I'm an Accessibility Champion – Ghost Spotter’s Club badge"
       width="300" height="300">
</a>
        </textarea>

        <p class="govuk-body">Or download the badge image directly:</p>
        <p><a class="govuk-link" href="{{ asset_path }}images/ghost-spotters-badge.png" download>
          Download the badge (PNG)
        </a></p>
      </div>

      
    </div>

  </div>
</div>

<script>
  const form = document.getElementById('password-form');
  const answersSection = document.getElementById('answers-section');
  const toggleSection = document.getElementById('toggle-section');
  const toggleButton = document.getElementById('toggle-answers');
  const badgeSection = document.getElementById('badge-section');

  form.addEventListener('submit', function (event) {
    event.preventDefault();
    const password = document.getElementById('trainer-password').value.trim().toLowerCase();

    if (password === 'spooky') {
      toggleSection.style.display = 'block';
      badgeSection.style.display = 'block';
      form.style.display = 'none';
    } else {
      alert('👻 Incorrect password! The spirits are displeased. Try again.');
    }
  });

  toggleButton.addEventListener('click', function () {
    const visible = answersSection.style.display === 'block';
    answersSection.style.display = visible ? 'none' : 'block';
    toggleButton.textContent = visible ? 'Show answers' : 'Hide answers';
    toggleButton.setAttribute('aria-expanded', (!visible).toString());
  });
</script>

{% endblock %}
